---
published: true
layout: posts
title: Ch3. 타입과 추상화
categories: 
  - oop
toc: true
---

> 현상은 복잡하다. 법칙은 단순하다. 버릴 게 무엇인지 알아내라.

- 해리 벡의 `지하철 노선도`
    - 지형 정보 제거. 역 사이의 연결성 강조

## 1. 추상화를 통한 복잡성의 극복

- 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법
- 추상화의 두 가지 차원
    - 1.구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화
    - 2.중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거
- 모든 추상화의 목적은 복잡성을 이해하기 쉽게 단순화하기 위함

---

## 2. 객체지향과 추상화

> 기껏해야 트럼프에 불과해

- 모든 객체를 '트럼프'라는 하나의 개념으로 단순화해서 바라보는 것

### 그룹으로 나누어 단순화하기

- 정원사, 병사, 신하, 왕자와 공주, 하객으로 참석한 왕과 왕비들, 하트 잭, 하트 왕, 하트 여왕
    - 모두 `트럼프`
    - 복잡성 감소!

### 개념(Concept)
- 공통점을 기반으로 객체들을 묶기 위한 그릇 
    - ex) 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있는 객체 = `트럼프`

- 개념을 적용해 개념 그룹의 일원이 될 때 그 객체를 개념의 `인스턴스(instance)`라고 함

- 객체(object)
    - 특정한 개념을 적용할 수 있는 구체적인 사물
- 인스턴스(instance)
    - 개념이 객체에 적용됐을 때, 객체 = 개념의 '인스턴스'

- 주변의 복잡한 객체들은 단 지 몇 가지 개념의 인스턴스일 뿐

### 개념의 세 가지 관점

- 심볼(symbol) : 개념을 가리키는 간락한 이름이나 명칭
- 내연(intension) : 개념의 완전한 정의. 내연의 의미를 이용해 객체가 개념에 속하는지 여부 판단
- 외연(extension) : 개념에 속하는 모든 객체의 집합(set)

- 개념을 이용해 공통점을 가진 객체들을 분류
    - OOP가 복잡성을 극복하는 방법

### 객체를 분류하기 위한 틀

- 분류
    - 객체에 특정한 개념을 적용하는 작업
- 객체에 특정한 개념을 적용한다면, 그 객체를 특정한 집합의 소속으로 분류하고 있는 것

> 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정한다

### 분류는 추상화를 위한 도구다

- 개념으로 묶는다 = 개별 객체 간의 차이점을 무시하고 공통점만 취한다
    - 추상화::1
- 여러 공통점 중 중요한 특징만 추린다 = 불필요한 세부 사항을 제거한다
    - 추상화::2

---

## 3. 타입

- 타입은 공통점을 기반으로 객체들을 묶기 위한 틀

- 타입(type) = 개념
    - 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념
    - 어떤 객체에 타입을 적용할 수 있을 때 그 객체 = 타입의 인스턴스
    - 타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원


### 데이터 타입

- 타입은 데이터가 어떻게 사용되느냐에 관한 것
    - 데이터가 어떤 타입에 속하는지 결정하는 것은 데이터에 적용할 수 있는 작업
    - ex) 숫자형 데이터 = 데이터에 더하기, 빼기, 곱하기, 나누기 가능

- 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰짐
    - 데이터 타입은 연산 작업을 수행하기에 가장 효과적인 형태가 선택됨

- 데이터 타입
    - 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터
    - 데이터에 대한 분류는 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지 결정


### 객체와 타입

- 객체지향 프로그래밍에서 객체를 일종의 데이터처럼 사용
    - 객체를 타입에 따라 분류하고, 타입 이름을 명명하는 것 = 프로그램에 사용할 새로운 데이터 타입을 선언하는 것

> 애플리케이션 내부의 모든 객체의 상태를 모으면, 애플리케이션에서 관리해야 하는 전체 데이터를 표현할 수 있다

**BUT, 객체는 데이터가 아니다!**

- 객체에서 중요한 것응 객체의 행동
    - 상태는 행동의 결과로 초래된 부수효과를 쉽게 표현하기 위해 도입된 추상적인 개념일 뿐
- 객체가 이웃하는 객체와 협력하기 위해 어떤 `행동`을 해야 할지 결정하는 것이 핵심


1. 어떤 객체가 어떤 타입에 속하는지 결정하는 것은 객체가 수행하는 행동
    - 동일한 행동을 수행하는 객체 = 동일한 타입의 객체
2. 객체의 내부적인 표현은 외부로부터 철저하게 감춰짐
    - 객체 내부 상태를 어떤 방식으로 표현해도 무관

### 행동이 우선이다

객체가 다른 객체와 동일한 데이터를 가지고 있더라도 다른 행동을 한다면 그 객체들은 서로 다른 타입으로 분류되어야 한다

- 객체의 타입을 결정하는 것은 객체의 행동뿐이다
- 객체가 어떤 데이터를 보유하고 있는지는 타입을 결정하는 데 아무런 영향도 미치지 않는다

- 동일한 행동 = 동일한 책임 = 동일한 메시지 수신
    - 동일한 타입의 객체는 (내부 표현 방식과 무관하게) 동일한 메시지를 수신하고 이를 처리할 수 있다
    - `다형성`
- 데이터가 아닌 행동이 중요 = 외부에 데이터 감춰야 함
    - 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야 함
    - `캡슐화`

1. 객체가 외부에 제공해야 하는 책임을 먼저 결정
2. 책임을 수행하는 데 적합한 데이터 나중에 결정
3. 데이터를 책임을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화
-> 책임-주도 설계(Responsibility-Driven Design)

---

## 4. 타입의 계층

### 트럼프 계층

- 일반화/특수화(generalization/specialization) 관계
    - 트럼프는 트럼프 인간을 포괄하는 좀 더 일반적인 개념
    - 트럼프 인간은 트럼프보다 좀 더 특화된 행동을 하는 특수한 개념

### 일반화/특수화 관계

- 역시, 중요한 것은 객체가 외부에 제공하는 `행동`

- 일반적 타입
    - 특수한 타입이 가진 모든 행동들 중에서 일부 행동만을 가지는 타입
    - 더 적은 수의 행동
- 특수한 타입
    - 일반적인 타입이 가지는 **모든 행동을 포함**하지만 거기에 더해 자신만의 행동을 추가하는 타입
    - 더 많은 수의 행동

### 슈퍼 타입/서브 타입

- 슈퍼 타입(Supertype)
    - 좀 더 일반적인 타입
- 서브 타입(Subtype)
    - 좀 더 특수한 타입

- 어떤 타입이 다른 타입의 서브타입이 되기 위해서는 `행위적 호환성`을 만족시켜야
- 어떤 타입을 다른 타입의 서브타입이라고 말할 수 있으려면, 다른 타입을 대체할 수 있어야 한다
    - LSP rule

---

## 5. 정적 모델

### 타입의 목적

- 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기 위함
    - 타입을 사용하면, 동적으로 변하는 객체의 상태를 정적인 관점에서 표현할 수 있음

### 그래서 결국 타입은 추상화다

- 타입을 통해, 객체의 동적인 특성을 추상화할 수 있다
    - 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화 한다

### 동적 모델/정적 모델

1. 객체가 특정 시점에 구체적으로 어떤 상태를 가지는가
    - 객체의 스냅샷
    - (객체지향 모델링을 위한 표준 언어) UML에서 객체 다이어그램(object diagram)
    - 동적 모델(dynamic model)

2. 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는가
    - 타입 모델
    - 정적 모델(static model)
        - (동적으로 변하는 객체의 상태가 아닌) 객체가 속한 타입의 정적인 모습을 표현

### 클래스

> 객체를 분류하는 기준은 타입이며, 타입을 나누는 기준은 객체가 수행하는 행동이다

> 클래스는 타입을 구현하기 위해 프로그래밍 언어에서 제공하는 구현 메커니즘이다

- OOP에서 정적인 모델은 클래스를 이용해 구현됨
    - 타입을 `구현`하는 가장 보편적인 방식이 `클래스`를 이용하는 것
- 클래스 != 타입
    - 타입(type)은 객체를 분류하기 위해 사용하는 개념
    - 클래스(class)는 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나

1. 객체를 분류하기 위해 타입을 결정
2. 프로그래밍 언어를 이용해 타입을 구현할 수 있는 한 가지 방법이 클래스